(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a.n(n),r=a(37),s=a.n(r),o=a(9),i=(a(91),a(6)),l=a.n(i),u=a(10),j=a(7),d=a(15),b=a(11),m=a.n(b),h=a(13),O=Object(h.a)(),p=a(0),x=Object(n.createContext)(),f=function(e){var t=e.children,a=Object(n.useState)(),c=Object(j.a)(a,2),r=c[0],s=c[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/users");case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(p.jsx)(x.Provider,{value:{currentUser:r,changeCurrentUser:function(e){console.log(e),e&&s(e)}},children:t})},v=function(){var e=Object(n.useContext)(x),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),o=Object(j.a)(s,2),i=o[0],b=o[1],h=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={email:c,password:i},t.next=4,m.a.post("/users/login",n);case 4:200!==(r=t.sent).status&&O.push("/login"),e.changeCurrentUser(r.data),O.push("/");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)("form",{className:"row g-2",onSubmit:h,children:[Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"emailLogin",className:"form-label",children:"Email"}),Object(p.jsx)("input",{name:"email",type:"text",value:c,className:"form-control",onChange:function(e){return r(e.target.value)},id:"emailLogin",required:!0,autoComplete:"off"})]}),Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"passwordLogin",className:"form-label",children:"Password"}),Object(p.jsx)("input",{name:"password",type:"password",value:i,className:"form-control",onChange:function(e){return b(e.target.value)},id:"passwordLogin",required:!0})]}),Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)("button",{className:"btn btn-dark",children:"Login"})}),Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)(d.a,{className:"btn btn-dark",to:"/register",children:"Create a new user"})})]})},g=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),o=s[0],i=s[1],d=Object(n.useState)(""),b=Object(j.a)(d,2),h=b[0],x=b[1],f=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:a,email:h,password:o},e.next=4,m.a.post("/users/register",n);case 4:if(200===(c=e.sent).status){e.next=8;break}return console.log(c.data),e.abrupt("return",O.push("/"));case 8:console.log(c.data),O.push("/login");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{className:"row g-2",onSubmit:f,children:[Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"nameRegister",className:"form-label",children:"Email"}),Object(p.jsx)("input",{name:"name",type:"text",value:a,className:"form-control",onChange:function(e){return c(e.target.value)},id:"nameRegister",required:!0,autoComplete:"off"})]}),Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"emailLogin",className:"form-label",children:"Email"}),Object(p.jsx)("input",{name:"email",type:"text",value:h,className:"form-control",onChange:function(e){return x(e.target.value)},id:"emailLogin",required:!0,autoComplete:"off"})]}),Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"passwordLogin",className:"form-label",children:"Password"}),Object(p.jsx)("input",{name:"password",type:"password",value:o,className:"form-control",onChange:function(e){return i(e.target.value)},id:"passwordLogin",required:!0})]}),Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)("button",{className:"btn btn-dark",children:"Login"})})]})},N=a(27),S=a(28),w=a(29),k=a(35),C=a(34),y=function(e){return Object(p.jsxs)("form",{className:"row g-2",onSubmit:function(t){return e.onSubmit(t)},children:[Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsx)("label",{htmlFor:"nameStore",className:"form-label",children:"Store Name"}),Object(p.jsx)("div",{className:"col-sm-12",children:Object(p.jsx)("input",{name:"name",className:"form-control",value:e.store.name,onChange:function(t){return e.onChange(t)},id:"nameStore",required:!0})})]}),Object(p.jsxs)("div",{className:"col-6",children:[Object(p.jsx)("label",{htmlFor:"openStore",className:"form-label",children:"Open Store"}),Object(p.jsx)("input",{className:"form-control",name:"openStore",id:"openSotre",value:e.store.openStore,onChange:function(t){return e.onChange(t)}})]}),Object(p.jsxs)("div",{className:"col-6",children:[Object(p.jsx)("label",{htmlFor:"closeStore",className:"form-label",children:"Open Store"}),Object(p.jsx)("input",{className:"form-control",name:"closeStore",id:"openSotre",value:e.store.closeStore,onChange:function(t){return e.onChange(t)}})]}),Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)("button",{className:"btn btn-dark",children:"Submit"})})]})},E=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e.onChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(N.a)({},a,n))},e.onSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,console.log(n),t.next=5,m.a.post("/store/new",n);case 5:200!==(c=t.sent).status&&(console.log(c.data),O.push("/stores/new")),O.push("/");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(w.a)(a,[{key:"render",value:function(){return Object(p.jsx)(y,{onChange:this.onChange,onSubmit:this.onSubmit,store:this.state})}}]),a}(n.Component),_=a(19),F=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e.componentDidMount=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,m.a.get("/store/".concat(a));case 3:n=t.sent,e.setState(n.data);case 5:case"end":return t.stop()}}),t)}))),e.onChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(_.a)(Object(_.a)({},e.state),{},Object(N.a)({},a,n)))},e.onSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props.match.params.id,c=e.state,t.next=5,m.a.put("/store/".concat(c._id),c);case 5:200!==(r=t.sent).status&&(console.log(r.data),O.push("/stores/edit/".concat(n))),O.push("/");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(w.a)(a,[{key:"render",value:function(){return Object(p.jsx)(y,{onChange:this.onChange,onSubmit:this.onSubmit,store:this.state})}}]),a}(n.Component),A=Object(n.createContext)(),L=function(e){var t=e.reducer,a=e.initialState,c=e.children;return Object(p.jsx)(A.Provider,{value:Object(n.useReducer)(t,a),children:c})},D=function(){return Object(n.useContext)(A)},I=function(){var e=Object(n.useContext)(x);console.log(e);var t=D(),a=Object(j.a)(t,1)[0].basket,c=function(){var t=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/users/logout");case 2:a=t.sent,e.changeCurrentUser(a.data),O.push("/");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsx)("nav",{className:"navbar sticky-top navbar-expand-md navbar-dark bg-dark",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)(d.a,{className:"navbar-brand",to:"/",children:"GlazedApp"}),Object(p.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:e&&"LoggedOut"!==e.currentUser?Object(p.jsx)("button",{className:"nav-link btn btn-dark",onClick:c,children:"LogOut"}):Object(p.jsx)(d.a,{className:"nav-link btn btn-dark",to:"/login",children:"LogIn"})}),Object(p.jsx)("li",{className:"nav-item",children:e&&!0===e.currentUser.isAdmin?Object(p.jsx)(d.a,{className:"nav-link btn btn-dark",to:"/stores/new",children:"Create Store"}):null}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(d.a,{className:"nav-link btn btn-dark",to:"/cart",children:["Cart",Object(p.jsx)("span",{children:a.length})]})})]})]})})},P=function(e){var t=e.id,a=e.img,n=e.name,c=e.price,r=D(),s=Object(j.a)(r,2),o=(s[0],s[1]);return Object(p.jsx)("div",{className:"col-sm-3",children:Object(p.jsxs)("div",{className:"card text-center",children:[Object(p.jsx)("img",{src:a,className:"card-img-top",alt:n}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title",children:n}),Object(p.jsx)("p",{className:"card-text",children:Object(p.jsxs)("small",{className:"text-muted",children:[c,"\u20ac"]})}),Object(p.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){o({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from the Basket"})]})]})})},q=function(){var e=D(),t=Object(j.a)(e,1)[0].basket;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"row ",children:t.map((function(e){return Object(p.jsx)(P,{id:e.id,name:e.name,img:e.img,price:e.price},e.id)}))}),Object(p.jsxs)("div",{className:"row justify-content-md-center",children:[Object(p.jsx)("div",{className:"col col-md-auto",children:Object(p.jsx)("h4",{className:"h4",children:"Subtotal(".concat(t.length," items): ").concat(function(e){var t=0;return e.map((function(e){return t=parseInt(e.price)+t})),t}(t),"\u20ac")})}),Object(p.jsx)("div",{className:"col col-md-auto",children:Object(p.jsx)(d.a,{className:"btn btn-dark",to:"/checkout",children:"Checkout"})})]})]})},R=function(){var e=Object(n.useContext)(x),t=Object(n.useState)([]),a=Object(j.a)(t,2),c=a[0],r=a[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/store");case 2:t=e.sent,a=t.data.stores,r(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(p.jsx)("div",{className:"row row-cols-3",children:c.map((function(t){return Object(p.jsx)("div",{className:"col-sm",children:Object(p.jsx)("div",{className:"card text-center",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title",children:t.name}),Object(p.jsxs)("p",{className:"card-text",children:["Open:",t.openStore," Close:",t.closeStore]}),Object(p.jsx)(d.a,{className:"card-link btn btn-outline-primary",to:"/stores/".concat(t._id),id:t._id,children:"Go to the Store"}),!0===e.currentUser.isAdmin?Object(p.jsx)(d.a,{className:"card-link btn btn-outline-primary",to:"/stores/edit/".concat(t._id),id:t._id,children:"Edit the Store"}):null]})})},t._id)}))})},M=function(){return Object(p.jsx)(R,{})},T=a(84),U=a.n(T),B=(a(119),function(){var e=D(),t=Object(j.a)(e,1)[0].basket,a=Object(n.useState)(),c=Object(j.a)(a,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){var e=t[0].storeId;(function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/store/".concat(e));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t]),Object(p.jsxs)("div",{className:"row justify-content-md-center",children:[Object(p.jsx)("div",{className:"col col-md-auto",children:Object(p.jsx)("h4",{className:"h4",children:"Subtotal(".concat(t.length," items): ").concat(function(){var e=0;return t.map((function(t){return e=parseInt(t.price)+e})),e}(),"\u20ac")})}),Object(p.jsx)(U.a,{selected:r,onChange:function(e){return s(e)},showTimeSelect:!0,timeFormat:"HH:mm"})]})}),K=function(e){var t=e.id,a=e.img,n=e.name,c=e.price,r=e.storeId,s=D(),o=Object(j.a)(s,2),i=(o[0],o[1]);return Object(p.jsx)("div",{className:"col-sm-3",children:Object(p.jsxs)("div",{className:"card text-center",children:[Object(p.jsx)("img",{src:a,className:"card-img-top",alt:n}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title",children:n}),Object(p.jsx)("p",{className:"card-text",children:Object(p.jsxs)("small",{className:"text-muted",children:[c,"\u20ac"]})}),Object(p.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){i({type:"ADD_TO_BASKET",item:{id:t,img:a,name:n,price:c,storeId:r}})},children:"Add to card"})]})]})})},V=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={products:[]},e.componentDidMount=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/products");case 2:a=t.sent,n=a.data.products,e.setState(Object(_.a)(Object(_.a)({},n),{},{products:n}));case 5:case"end":return t.stop()}}),t)}))),e.renderProducts=function(){var t=e.props.match.params.id;return e.state.products.map((function(e){return Object(p.jsx)(K,{storeId:t,id:e._id,img:e.img,name:e.name,price:e.price},e._id)}))},e}return Object(w.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"row",children:this.renderProducts()})}}]),a}(n.Component),G=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(0),s=Object(j.a)(r,2),o=s[0],i=s[1],d=Object(n.useState)(""),b=Object(j.a)(d,2),h=b[0],O=b[1],x=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:a,price:o,img:h},e.next=4,m.a.post("/products",n);case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:function(e){return x(e)},noValidate:!0,children:[Object(p.jsxs)("div",{className:"row mb-3",children:[Object(p.jsx)("label",{htmlFor:"nameStore",className:"col-sm-2 col-form-label",children:"Product Name"}),Object(p.jsx)("div",{className:"col-sm-10",children:Object(p.jsx)("input",{name:"name",className:"form-control",value:a,onChange:function(e){return c(e.target.value)},id:"nameStore",required:!0})})]}),Object(p.jsxs)("div",{className:"row mb-3",children:[Object(p.jsx)("label",{htmlFor:"nameStore",className:"col-sm-2 col-form-label",children:"Product Image"}),Object(p.jsx)("div",{className:"col-sm-10",children:Object(p.jsx)("input",{name:"name",className:"form-control",value:h,onChange:function(e){return O(e.target.value)},id:"nameStore",required:!0})})]}),Object(p.jsxs)("div",{className:"row mb-3",children:[Object(p.jsx)("label",{htmlFor:"nameStore",className:"col-sm-2 col-form-label",children:"Product Price"}),Object(p.jsx)("div",{className:"col-sm-10",children:Object(p.jsx)("input",{name:"name",className:"form-control",value:o,onChange:function(e){return i(e.target.value)},id:"nameStore",required:!0})})]}),Object(p.jsx)("button",{children:"Submit"})]})};var H=function(){return Object(p.jsxs)(o.b,{history:O,children:[Object(p.jsx)(I,{}),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",exact:!0,component:M}),Object(p.jsx)(o.a,{path:"/login",exact:!0,component:v}),Object(p.jsx)(o.a,{path:"/register",component:g}),Object(p.jsx)(o.a,{path:"/stores/new",component:E}),Object(p.jsx)(o.a,{path:"/stores/edit/:id",exact:!0,component:F}),Object(p.jsx)(o.a,{path:"/stores/:id",exact:!0,component:V}),Object(p.jsx)(o.a,{path:"/cart",exact:!0,component:q}),Object(p.jsx)(o.a,{path:"/checkout",component:B}),Object(p.jsx)(o.a,{pathe:"/product/new",exact:!0,component:G})]})})]})},J=(a(176),a(65));s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(L,{initialState:{basket:[]},reducer:function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(_.a)(Object(_.a)({},e),{},{basket:[].concat(Object(J.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var a=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(J.a)(e.basket);return a>=0?n.splice(a,1):console.log("error"),Object(_.a)(Object(_.a)({},e),{},{basket:n});default:return e}},children:Object(p.jsx)(f,{children:Object(p.jsx)(H,{})})})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.f615815b.chunk.js.map